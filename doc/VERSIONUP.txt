!バージョンアップの方法

バージョンアップの方法は比較的簡単ですが、操作ミスなどで貴重なデータを
失わないようhikiconf.rbの$data_pathで指定したディレクトリ配下のファイルは
どこかにバックアップしておいてください。

では、バージョンアップの手順を示します。

!!アーカイブの展開

 $ tar zxf hiki-0.x.x.tar.gz

などとしてアーカイブを展開してください。
アーカイブを展開するとhikiというディレクトリができるはずです。

!!新しいHikiのコピー

展開したアーカイブをすでにインストールしてある古いHikiの上へ上書きします。
ここでは、/home/foo/public_html/hiki/に古いHikiがインストールされている
ことにしましょう。

 $ cd hiki
 $ cp -R * /home/foo/public_html/hiki

!!データ格納用ディレクトリへのコピー

アーカイブ中のdata/text/TextFormattingRulesというファイルは書式の変更や
追加などで変更される可能性があります。このため、このファイルはhikiconf.rb
の$data_pathで指定したデータ格納用ディレクトリ配下へコピーします。

$data_pathに'/home/foo/hiki'が指定されているとすると、

 $ cp data/text/TextFormattingRules /home/foo/hiki/text/

のようになります。

!!hikiconf.rbの修正

まず、現状のhikiconf.rbをどこかにバックアップしてください。

次にアーカイブ中のhikiconf.rb.sampleをhikiconf.rbへコピーし、
バックアップしておいたhikiconf.rbの内容を参照しながら修正します。

これは、バージョンアップに伴いhikiconf.rbでの設定項目が増減する可能性が
あるためです。

!!トラブルシュート
!!! バージョンアップしたらInternal Server Errorになってしまう
hiki.cgiの1行目を確認してください。サーバによっては/usr/bin/envが使えない
ケースがあります。その場合、

 #!/usr/local/bin/ruby

や、

 #!C:\ruby\bin\ruby.exe

など、Rubyがインストールされているパスを明示する必要があるかもしれません。

