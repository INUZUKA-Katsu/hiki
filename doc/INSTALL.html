<!DOCTYPE html
    PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
  <meta http-equiv="Content-Language" content="ja">
  <meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
  <meta name="generator" content="Hiki 0.3">
  <title>Hiki - Hikiのインストール</title>
  <link rel="stylesheet" type="text/css" href="../theme/hiki/hiki_base.css">
  <link rel="stylesheet" type="text/css" href="../theme/hiki/hiki.css">
</head>

<body>


<div class="hiki">
  <h1 class="header"><a href="hiki.cgi?c=search;key=Hiki%A4%CE%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%EB">Hikiのインストール</a></h1>

  <div class="day">
    <div class="body">
      <div class="section">
        
        <div></div>
        <div><h2><a name="l0"> </a>Hikiのインストールと設定</h2>
<p>
Hikiを動かすためには何はなくとも、まずRubyが必要です。今のところRuby 1.6.7と1.6.8で動作実績があります。Rubyは以下のURLから入手してください。</p>
<p>
<a href="http://www.ruby-lang.org/ja/">http://www.ruby-lang.org/ja/</a></p>
<h3><a name="l1"> </a>前提ライブラリのインストール</h3>
<p>
Hikiを使うためには以下のライブラリが別途必要です。</p>
<p>
<dl>
<dt>
strscan (0.6.5以降）</dt>
<dd>
<a href="http://raa.ruby-lang.org/list.rhtml?name=strscan">http://raa.ruby-lang.org/list.rhtml?name=strscan</a></dd>
</dl>
<dl>
<dt>
Amrita 1.0.2</dt>
<dd>
<a href="http://raa.ruby-lang.org/list.rhtml?name=amrita">http://raa.ruby-lang.org/list.rhtml?name=amrita</a></dd>
</dl>
</p>
<p>
これらについては上記のURLからダウンロード後、添付ドキュメントを参考にインストールしてください。</p>
<h3><a name="l2"> </a>インストール例で前提とする環境</h3>
<p>
一般的なCGIの実行を許可しているISPやレンタルサーバ上で利用する場合を想定し、以下のような環境を例に説明します。</p>
<ul>
<li>
WWWサーバ: Apache 1.3.x</li>
<li>
ユーザ名: foo</li>
<li>
HikiのURL: http://www.hoge.example.org/~foo/hiki/</li>
<li>
上記URLのパス: /home/foo/public_html/hiki/</li>
<li>
データ格納用のパス: /home/foo/hiki/</li>
</ul>
<h3><a name="l3"> </a>CGIスクリプトの設定</h3>
<p>
配布アーカイブを展開し、中身をすべて/home/foo/public_html/hiki/へコピーします。hiki.cgiがCGIスクリプト本体なので、WWWサーバの権限で実行可能なようにパーミッションを設定してください。</p>
<p>
また、/usr/bin/envを使った起動ができない環境では、hiki.cgiの最初の行をRubyのパスに書き換える必要があるでしょう。例えばUNIX系なら、</p>
<pre>
#!/usr/local/bin/ruby
</pre>
<p>
Windows系なら、</p>
<pre>
#!c:/ruby/bin/ruby
</pre>
<p>
という感じです。</p>
<h3><a name="l4"> </a>.htaccessの作成</h3>
<p>
続いて、CGIの実行環境を整えます。<strong>
dot.htaccess</strong>
を<strong>
.htaccess</strong>
にリネームして、環境に合わせて書き換えます。添付のサンプルは以下のようになっています。</p>
<pre>
Options +ExecCGI

AddHandler cgi-script .cgi
DirectoryIndex hiki.cgi

&lt;Files &quot;*.rb&quot;&gt;
       deny from all
&lt;/Files&gt;
</pre>
<p>
ここでは、</p>
<ul>
<li>
CGIの実行を可能にし、</li>
<li>
サフィックス「.cgi」のファイルをCGIと認識させ、</li>
<li>
hiki.cgiをデフォルトのファイルに設定し、</li>
<li>
 *.rbのファイルの参照</li>
を禁止</ul>
<p>
という設定になっています。</p>
<h3><a name="l5"> </a>データ格納用ディレクトリの作成</h3>
<h4><a name="l6"> </a>data配下のコピーとパーミションの設定</h4>
<p>
展開したディレクトリの中にdataというディレクトリがあります。このディレクトリをどこかへ移動してください。このディレクトリの場所は、WWW経由でアクセスできない(<strong>
public_html</strong>
配下でない)場所が良いでしょう。</p>
<pre>
$ mv data /home/foo/hiki
</pre>
<p>
データ格納用のディレクトリは、WWWサーバの権限で書き込めるパーミッションにしておく必要があります。</p>
<h3><a name="l7"> </a>hikiconf.rbの作成</h3>
<p>
次に、<strong>
hikiconf.rb.sample</strong>
を<strong>
hikiconf.rb</strong>
にリネームして、内容を書き換えます。このファイルはRubyスクリプトとして、CGIに直接読み込まれます。(requireされます）Hikiの主要な設定はCGI経由で行えるので、最低限書き換えるべきなのは最初に出てくる<strong>
$data_path</strong>
だけです。</p>
<pre>
$data_path = '/home/foo/hiki'
</pre>
<p>
<strong>
hikiconf.rb</strong>
には、他にもいろいろな設定項目を記述できます。詳細については、<strong>
hikiconf.rb.sample</strong>
中のコメントを参照してください。</p>
<h2><a name="l8"> </a>Hikiの実行</h2>
<p>
HikiをインストールしたURL（ここではhttp://www.hoge.example.org/~foo/hiki/）をブラウザで開いてみてください。FrontPageが表示されればインストールは成功です。</p>
<p>
ページの上部には以下のようなメニューが表示されているはずです。</p>
<pre>
[ 新規作成 | 編集 | 差分 ] [ FrontPage | 一覧 | 検索 | 更新履歴 ] [ 管理 ] 
</pre>
<p>
以下、これらのメニューについて説明します。</p>
<h3><a name="l9"> </a>新規作成</h3>
<p>
「新規作成」のアンカをクリックすると「新規作成」画面へ遷移し新しくページを追加することができます。</p>
<h3><a name="l10"> </a>編集</h3>
<p>
「編集」のアンカをクリックすると参照しているページの内容を編集することができます。</p>
<p>
Hikiにはページ単位の「凍結」という考え方があります。管理者がページを編集して保存する際に「ページの凍結」というチェックボックスをチェックし、管理者用パスワードを入力することにより、そのページは凍結されます。凍結されたページを編集するには管理者用のパスワードを入力する必要があります。</p>
<h3><a name="l11"> </a>差分</h3>
<p>
「差分」のアンカをクリックすると参照しているページの最新版と、１つ前の版との内容の差分を参照することができます。</p>
<h3><a name="l12"> </a>FrontPage</h3>
<p>
「FrontPage」のアンカをクリックするとHikiのトップページに遷移します。</p>
<h3><a name="l13"> </a>一覧</h3>
<p>
「一覧」のアンカをクリックすると作成された全てのページを一覧で表示します。一覧画面では、各ページの最終更新日時、凍結されているか否かを参照することができます。</p>
<h3><a name="l14"> </a>検索</h3>
<p>
「検索」のアンカをクリックすると「検索」画面に遷移します。検索画面で検索したいキーワードを入力し、「検索」ボタンを押下すると、全てのページ中から入力したキーワードを含むページが一覧されます。</p>
<h3><a name="l15"> </a>更新履歴</h3>
<p>
「更新履歴」のアンカをクリックすると作成された全てのページを更新日時が新しい順に並び替えて一覧表示します。</p>
<h3><a name="l16"> </a>管理</h3>
<p>
「管理」のアンカをクリックすると管理者用ページに遷移し、以下の項目を設定することができます。</p>
<ul>
<li>
サイト名</li>
<li>
著者名（サイト管理者名）</li>
<li>
メールアドレス（サイト管理者）</li>
<li>
管理者用パスワード</li>
<li>
更新時のメール通知有無</li>
<li>
テーマ</li>
<li>
サイドバーの利用有無</li>
</ul>
<p>
【重要】インストールが成功したら、すぐに「管理」画面で管理者用パスワードを設定してください。</p>
</div>
      </div>
    </div>
  </div>
</div>

<div class="footer">
  <a href="http://www.namaraii.com/hiki/">Hiki</a> 0.3
  &copy; 2002-2003 by <a href="http://www.namaraii.com/">TAKEUCHI Hitoshi</a>.<br>
  Powered by Ruby 1.6.8 and Amrita.<br>
  Modified by TAKEUCHI Hitoshi.
</div>
</body>
</html>
